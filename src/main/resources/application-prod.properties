# Production settings: TLS is terminated by the upstream reverse proxy (nginx proxy in App Service).
# Disable server-side SSL in the backend container when TLS is terminated by the proxy.
server.ssl.enabled=false
server.port=${PORT:8080}

# Production cookie settings (secure=true, sameSite=None when using cross-site cookies over TLS)
app.security.cookie-secure=true
app.security.cookie-name=refresh_token
app.security.cookie-same-site=None
# Configure allowed CORS origins for production. When using credentialed requests
# (cookies or fetch with credentials: 'include') the Access-Control-Allow-Credentials
# header must be true and the origin must be an explicit origin (not '*').
# Example (uncomment and set to your frontend origin(s)):
# app.cors.allowed-origins[0]=https://app.example.com
# app.cors.allowed-origins[1]=https://admin.example.com
# Bind to environment variable ALLOWED_ORIGINS (comma-separated) if provided.
# Example env value: "https://app.example.com,https://admin.example.com"
app.cors.allowed-origins=${ALLOWED_ORIGINS}

# Key Vault fail-fast option: when true the application will fail startup if the configured
# Key Vault key cannot be retrieved. Useful in CI/production validation.
app.security.azure.keyvault.fail-fast=${APP_SECURITY_AZURE_KEYVAULT_FAIL_FAST:false}

# Key Vault vault URL: the CI now writes the value into the app setting named AZ_KEYVAULT_VAULT_URL.
# The Spring property below maps to that environment variable so the application will read the vault
# URL regardless of whether CI used the long name or the alias.
# Note: keep the Spring property name `app.security.azure.keyvault.vault-url` unchanged.
app.security.azure.keyvault.vault-url=${AZ_KEYVAULT_VAULT_URL}

# Note: TLS termination is expected at the nginx proxy in front of this backend; do not enable server-side
# TLS inside the container unless your deployment requires it.

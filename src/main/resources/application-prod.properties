# Production settings: TLS is terminated by the upstream reverse proxy (nginx proxy in App Service).
# Disable server-side SSL in the backend container when TLS is terminated by the proxy.
server.ssl.enabled=false
server.port=${PORT:8080}

# Production cookie settings (secure=true, sameSite=None when using cross-site cookies over TLS)
app.security.cookie-secure=true
app.security.cookie-name=refresh_token
app.security.cookie-same-site=None
# Configure allowed CORS origins for production. When using credentialed requests
# (cookies or fetch with credentials: 'include') the Access-Control-Allow-Credentials
# header must be true and the origin must be an explicit origin (not '*').
# Example (uncomment and set to your frontend origin(s)):
# app.cors.allowed-origins[0]=https://app.example.com
# app.cors.allowed-origins[1]=https://admin.example.com
# Bind to environment variable ALLOWED_ORIGINS (comma-separated) if provided.
# Example env value: "https://app.example.com,https://admin.example.com"
app.cors.allowed-origins=${ALLOWED_ORIGINS:}

# Entra (Azure AD) OIDC configuration for backend resource server validation
# These should be set as environment variables in App Service:
# APP_SECURITY_ENTRA_ISSUER=https://login.microsoftonline.com/<tenant>/v2.0
# APP_SECURITY_ENTRA_AUDIENCE=<backend-client-id>
app.security.entra.issuer=${APP_SECURITY_ENTRA_ISSUER:}
app.security.entra.audience=${APP_SECURITY_ENTRA_AUDIENCE:}

# Key Vault fail-fast option: when true the application will fail startup if the configured
# Key Vault key cannot be retrieved. Useful in CI/production validation.
app.security.azure.keyvault.fail-fast=${APP_SECURITY_AZURE_KEYVAULT_FAIL_FAST:true}

# Note: TLS termination is expected at the nginx proxy in front of this backend; do not enable server-side
# TLS inside the container unless your deployment requires it.
